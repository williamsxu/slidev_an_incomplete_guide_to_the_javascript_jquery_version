var ue=Object.defineProperty;var be=e=>ue(e,"__esModule",{value:!0});var ge=(e,t)=>{be(e);for(var r in t)ue(e,r,{get:t[r],enumerable:!0})};ge(exports,{default:()=>ke,getStroke:()=>ee,getStrokeOutlinePoints:()=>B,getStrokePoints:()=>A});function Y(e,t,r,S=g=>g){return e*S(.5-t*(.5-r))}function p(e,t){return[e[0]+t[0],e[1]+t[1]]}function m(e,t){return[e[0]-t[0],e[1]-t[1]]}function f(e,t){return[e[0]*t,e[1]*t]}function de(e,t){return[e[0]/t,e[1]/t]}function I(e){return[e[1],-e[0]]}function ie(e,t){return e[0]*t[0]+e[1]*t[1]}function pe(e,t){return e[0]===t[0]&&e[1]===t[1]}function he(e){return Math.hypot(e[0],e[1])}function xe(e){return e[0]*e[0]+e[1]*e[1]}function Z(e,t){return xe(m(e,t))}function K(e){return de(e,he(e))}function me(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function ce(e,t){return f(p(e,t),.5)}function V(e,t,r){let S=Math.sin(r),g=Math.cos(r),y=e[0]-t[0],s=e[1]-t[1],x=y*g-s*S,L=y*S+s*g;return[x+t[0],L+t[1]]}function N(e,t,r){return p(e,f(m(t,e),r))}function $(e,t,r){return p(e,f(t,r))}var{min:_,PI:Se}=Math,ae=.275,j=Se+1e-4;function B(e,t={}){let{size:r=16,smoothing:S=.5,thinning:g=.5,simulatePressure:y=!0,easing:s=n=>n,start:x={},end:L={},last:q=!1}=t,{cap:k=!0,taper:P=0,easing:C=n=>n*(2-n)}=x,{cap:b=!0,taper:a=0,easing:T=n=>--n*n*n+1}=L;if(e.length===0||r<=0)return[];let U=e[e.length-1].runningLength,te=Math.pow(r*S,2),O=[],v=[],X=e.slice(0,10).reduce((n,i)=>{let o=i.pressure;if(y){let u=_(1,i.distance/r),l=_(1,1-u);o=_(1,n+(l-n)*(u*ae))}return(n+o)/2},e[0].pressure),c=Y(r,g,e[e.length-1].pressure,s),J,ne=e[0].vector,z=e[0].point,F=z,E=z,M=F;for(let n=0;n<e.length-1;n++){let{pressure:i}=e[n],{point:o,vector:u,distance:l,runningLength:R}=e[n];if(U-R<3)continue;if(g){if(y){let D=_(1,l/r),W=_(1,1-D);i=_(1,X+(W-X)*(D*ae))}c=Y(r,g,i,s)}else c=r/2;J===void 0&&(J=c);let le=R<P?C(R/P):1,fe=U-R<a?T((U-R)/a):1;c=Math.max(.01,c*Math.min(le,fe));let re=e[n+1].vector,oe=ie(u,re);if(oe<0){let D=f(I(ne),c);for(let W=1/13,H=0;H<=1;H+=W)E=V(m(o,D),o,j*H),O.push(E),M=V(p(o,D),o,j*-H),v.push(M);z=E,F=M;continue}let se=f(I(N(re,u,oe)),c);E=m(o,se),(n===0||Z(z,E)>te)&&(O.push(E),z=E),M=p(o,se),(n===0||Z(F,M)>te)&&(v.push(M),F=M),X=i,ne=u}let d=e[0].point.slice(0,2),h=e.length>1?e[e.length-1].point.slice(0,2):p(e[0].point,[1,1]),Q=O.length<=1||v.length<=1,w=[],G=[];if(Q){if(!(P||a)||q){let n=$(d,K(I(m(d,h))),-(J||c)),i=[];for(let o=1/13,u=o;u<=1;u+=o)i.push(V(n,d,j*2*u));return i}}else{if(P||a&&Q)w.push(d,p(d,[.1,0]));else if(k)for(let o=1/13,u=o;u<=1;u+=o){let l=V(v[0],d,j*u);w.push(l)}else{let o=m(O[0],v[0]),u=f(o,.5),l=f(o,.51);w.push(m(d,u),m(d,l),p(d,l),p(d,u))}let n=ce(O[O.length-1],v[v.length-1]),i=I(K(m(h,n)));if(a||P&&Q)G.push(h,p(h,[1,0]));else if(b){let o=$(h,i,c);for(let u=1/29,l=0;l<=1;l+=u){let R=V(o,h,j*3*l);G.push(R)}}else G.push(p(h,f(i,c)),p(h,f(i,c*.99)),m(h,f(i,c*.99)),m(h,f(i,c)))}return O.concat(G,v.reverse(),w)}function A(e,t={}){var C;let{streamline:r=.5,size:S=16,last:g=!1}=t;if(e.length===0)return[];let y=.15+(1-r)*.85,s=Array.isArray(e[0])?e:e.map(({x:b,y:a,pressure:T=.5})=>[b,a,T]);s.length===1&&(s=[...s,[...p(s[0],[1,1]),...s[0].slice(2)]]);let x=[{point:[s[0][0],s[0][1]],pressure:s[0][2]||.25,vector:[1,1],distance:0,runningLength:0}],L=!1,q=0,k=x[0],P=s.length-1;for(let b=1;b<s.length;b++){let a=g&&b===P?s[b]:N(k.point,s[b],y);if(pe(k.point,a))continue;let T=me(a,k.point);if(q+=T,b<P&&!L){if(q<S)continue;L=!0}k={point:a,pressure:s[b][2]||.5,vector:K(m(k.point,a)),distance:T,runningLength:q},x.push(k)}return x[0].vector=((C=x[1])==null?void 0:C.vector)||[0,0],x}function ee(e,t={}){return B(A(e,t),t)}var ke=ee;
